# React Native 日志查看指南

## 快速查看日志

### 方法一：React Native DevTools（推荐，新方式）

根据提示信息，JavaScript 日志现在在 React Native DevTools 中：

1. **在 Metro Bundler 终端中按 `j` 键**
   - 这会打开 React Native DevTools
   - 或者访问：`http://localhost:8081/debugger-ui/`

2. **查看 Console 标签**
   - 所有 `console.log`、`console.error` 等日志都在这里
   - 包括错误堆栈信息

### 方法二：Metro Bundler 终端

Metro Bundler 终端（运行 `npm start` 的终端）会显示：
- JavaScript 编译错误
- Bundle 构建错误
- 运行时错误（部分）
- 警告信息

### 方法三：Android Logcat（原生错误）

**在 Android Studio 中**：
1. 打开 Android Studio
2. `View -> Tool Windows -> Logcat`
3. 过滤标签：
   - `ReactNativeJS` - JavaScript 日志
   - `ReactNative` - React Native 框架日志
   - `SwellNovalApp` - 应用特定日志（如果使用了统一前缀）

**命令行方式**：
```bash
# 查看所有 React Native 相关日志
adb logcat *:S ReactNativeJS:V ReactNative:V

# 查看应用所有日志
adb logcat | findstr SwellNovalApp

# 查看错误日志
adb logcat *:E

# 实时查看并保存到文件
adb logcat > logcat.txt
```

### 方法四：Chrome DevTools

1. **打开调试菜单**：
   - 在模拟器中按 `Ctrl + M`（Windows）
   - 或摇动设备
   - 选择 "Debug"

2. **Chrome 会自动打开**：
   - 地址：`http://localhost:8081/debugger-ui/`
   - 打开 "Console" 标签查看日志

3. **查看错误**：
   - 红色错误信息
   - 黄色警告信息
   - 可以点击查看详细堆栈

### 方法五：React Native Debugger（独立工具）

1. **下载安装**：
   - https://github.com/jhen0409/react-native-debugger/releases

2. **启动调试器**：
   - 打开 React Native Debugger
   - 在模拟器中按 `Ctrl + M` -> "Debug"

3. **查看日志**：
   - Console 标签：JavaScript 日志
   - Network 标签：网络请求
   - React DevTools：组件树和状态

## 日志类型和位置

### JavaScript 错误

**位置**：
- ✅ React Native DevTools（按 `j` 键）
- ✅ Chrome DevTools Console
- ✅ React Native Debugger Console
- ⚠️  Metro Bundler 终端（部分）

**查看方法**：
```bash
# 在 Metro Bundler 终端按 'j' 键
# 或访问 http://localhost:8081/debugger-ui/
```

### 原生 Android 错误

**位置**：
- ✅ Android Studio Logcat
- ✅ `adb logcat` 命令

**查看方法**：
```bash
adb logcat *:E ReactNativeJS:V
```

### 构建错误

**位置**：
- ✅ Metro Bundler 终端
- ✅ Gradle 构建输出
- ✅ Android Studio Build 窗口

**查看方法**：
```bash
# Metro Bundler 终端会显示编译错误
npm start

# Gradle 构建错误在构建输出中
npm run android
```

## 常用日志过滤命令

### Logcat 过滤

```bash
# 只看错误
adb logcat *:E

# React Native JavaScript 日志
adb logcat *:S ReactNativeJS:V

# 应用特定日志（使用统一前缀）
adb logcat | findstr "SwellNovalApp"

# 清除日志并重新开始
adb logcat -c && adb logcat
```

### 保存日志到文件

```bash
# 保存所有日志
adb logcat > logcat.txt

# 保存错误日志
adb logcat *:E > errors.txt

# 保存 React Native 日志
adb logcat *:S ReactNativeJS:V ReactNative:V > rn-logs.txt
```

## 调试技巧

### 1. 使用统一日志前缀

在代码中使用统一前缀，便于过滤：

```typescript
console.log('SwellNovalApp: 调试信息', data);
console.error('SwellNovalApp: 错误信息', error);
```

然后在 Logcat 中过滤：
```bash
adb logcat | findstr "SwellNovalApp"
```

### 2. 查看完整错误堆栈

在 Chrome DevTools 或 React Native DevTools 中：
- 点击错误信息
- 查看 "Stack trace"
- 点击文件名可以跳转到源代码

### 3. 网络请求日志

在 React Native Debugger 或 Chrome DevTools 中：
- 打开 "Network" 标签
- 查看所有网络请求和响应

### 4. 性能日志

```bash
# 在模拟器中
Ctrl + M -> Show Perf Monitor

# 或使用 React DevTools Profiler
```

## 常见错误位置

### 红屏错误（Red Screen）

**位置**：
- 模拟器/设备屏幕
- React Native DevTools
- Chrome DevTools Console

**查看**：
- 按 `j` 键打开 DevTools
- 或访问 `http://localhost:8081/debugger-ui/`

### 构建错误

**位置**：
- Metro Bundler 终端
- Android Studio Build 窗口
- Gradle 构建输出

### 运行时错误

**位置**：
- React Native DevTools（按 `j`）
- Chrome DevTools Console
- Logcat（原生错误）

### 网络错误

**位置**：
- React Native Debugger Network 标签
- Chrome DevTools Network 标签
- Logcat（原生网络错误）

## 快速参考

| 日志类型 | 查看位置 | 快捷键/命令 |
|---------|---------|------------|
| JavaScript 错误 | React Native DevTools | 按 `j` 键 |
| JavaScript 错误 | Chrome DevTools | `Ctrl + M` -> Debug |
| 原生错误 | Logcat | `adb logcat *:E` |
| 构建错误 | Metro 终端 | `npm start` |
| 网络请求 | DevTools Network | 打开 Network 标签 |

## 立即查看日志

### 现在就可以：

1. **在 Metro Bundler 终端按 `j` 键**
   - 打开 React Native DevTools
   - 查看 Console 标签

2. **或在模拟器中按 `Ctrl + M` -> "Debug"**
   - 打开 Chrome DevTools
   - 查看 Console 标签

3. **或使用命令行**：
   ```bash
   adb logcat *:S ReactNativeJS:V ReactNative:V
   ```

## 相关文档

- `docs/调试指南.md` - 完整调试指南
- React Native DevTools: http://localhost:8081/debugger-ui/
